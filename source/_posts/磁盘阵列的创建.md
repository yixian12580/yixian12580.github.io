---
title: 磁盘阵列的创建
categories:
  - 桌面
  - 系统
tags:
  - 磁盘阵列
  - Raid
abbrlink: '98e1822'
date: 2023-04-18 17:03:50
---

常见raid有0、1和5，以下操作在虚拟机下模拟，学会这招在自己电脑做个raid也未尝不可啊~

<!--more-->

### Windows 创建Raid

#### RAID 0 创建

添加两块硬盘，联机并初始化（2T以下选MBR，以上选GPT）

![](磁盘阵列的创建/1696771-20201120111756868-285808680.png)

 

右键选择新建带区卷（RAID 0）

![](磁盘阵列的创建/1696771-20201120111812290-1144456701.png)



 ![](磁盘阵列的创建/1696771-20201120111850103-2059147140.png)


![](磁盘阵列的创建/1696771-20201120111905435-1450299185.png)

 

 

![](磁盘阵列的创建/1696771-20201120111922972-2018935853.png)



![](磁盘阵列的创建/1696771-20201120111949462-604094980.png)

 


raid-0至少要两块硬盘以上才能创建，其容量是所有raid硬盘容量之和，传输速度也是所有容量速度之和，是所有raid中速度最快使用效率最高的，但没有冗余，如果其中一块硬盘坏了，整个raid就挂了。

#### raid 1创建

添加两块硬盘,联机并初始化（2T以下选MBR，以上选GPT）,选择新建镜像卷

![](磁盘阵列的创建/1696771-20201120112012357-1362309994.png)



![](磁盘阵列的创建/1696771-20201120112036037-810552617.png)



![](磁盘阵列的创建/1696771-20201120112050066-247295226.png)

 

![](磁盘阵列的创建/1696771-20201120112106819-849139697.png)



raid-1有且仅有两块硬盘（此处的硬盘也可以是由多个硬盘组成的阵列）才能创建，其容量是raid中容量最小的硬盘的容量（因为raid-1的硬盘的一半是用来备份的，空间利用率只有50%），传输速度也是单个硬盘的速度，是所有raid中速度最慢使用效率最低的，但是有冗余，如果其中一块硬盘坏了，数据还能正常使用不影响，只需换上新硬盘修复下即可。

#### RAID 5创建

添加三块硬盘，联机并初始化（2T以下选MBR，以上选GPT）

![](磁盘阵列的创建/1696771-20201120112125353-752082723.png)

![](磁盘阵列的创建/1696771-20201120112139072-489358093.png)



![](磁盘阵列的创建/1696771-20201120112154639-910442058.png)

![](磁盘阵列的创建/1696771-20201120112212550-2074233340.png)



raid-5至少要三块硬盘以上才能创建，其容量是N-1块硬盘的容量（N指raid中硬盘的个数，因为raid-5中的所有硬盘是环环相扣建立关系的），传输速度是N-1硬盘的速度，速度比raid-0慢，比raid-1快，使用效率也是介于两者之间，也是有冗余，最多只能坏一块盘，如果其中一块硬盘坏了，数据还能正常使用不影响，只需换上新硬盘修复下即可。

#### 部分主板也可在BIOS下设置RAID

  组建RAID的关键是硬盘的容量，目前，INTEL的RAID最大可以识别3.6TB（也就是十进制的4TB），就是2个2TB的硬盘组建RAID 0。不要用2个3TB的硬盘组RAID 0，因为只能用到4TB，有2TB白扔了。

  多个硬盘尽量接在同样的SATA口，比如都接SATA2.0（一般为黑色或蓝色接口）或都接SATA3.0（一般为白色接口）。在BIOS的SATA Configuration 中设置SATA Mode 为RAID Mode ,保存重启后，可以看到RAID ROM 启动并检测到2个2TB的硬盘，注意ROM采用16进制表示容量，2TB的硬盘显示为1.8TB。

   按CTRL-I进入RAID ROM 配置RAID，第一项Create RAID Volume ,就是建立RAID卷，回车进入。从Name : Volume0开始敲回车确认（默认就可以），到Capacity:(容量)时要注意。



### Linux创建Raid

#### 创建四个相同大小的硬盘

打开虚拟机，点击箭头所在位置

![](磁盘阵列的创建/image-20230418174228306.png)

点击添加硬盘

![](磁盘阵列的创建/image-20230418174248160.png)

一直点下一步，到出现磁盘大小（我这里定的是200G）

![](磁盘阵列的创建/image-20230418174311324.png)

点击下一步，然后点完成

![](磁盘阵列的创建/image-20230418174330408.png)

第一个硬盘就建好了，以此类推，再建三个，最后一定不要忘了点确定

![](磁盘阵列的创建/image-20230418174351370.png)

开启虚拟机，打开终端

![image-20230418174406537](磁盘阵列的创建/image-20230418174406537.png)

#### 将四个硬盘逐个分区并改格式

- **查看磁盘分区表**

![](磁盘阵列的创建/image-20230418174420413.png)

- **创建硬盘分区(每个硬盘分两个区)**

![](磁盘阵列的创建/image-20230418174436353.png)

- **将硬盘格式改为RAID格式（ｔ 为改格式命令,　fd 为RAID格式）**
  ![](磁盘阵列的创建/image-20230418174446695.png)
- **依次类推，把四个硬盘都分成两个区，并把格式改为RAID格式，每个硬盘操作过后记得保存**
- **四个硬盘分区完成后，查看一下分区情况**

![](磁盘阵列的创建/image-20230418174512432.png)



![](磁盘阵列的创建/image-20230418174529580.png)

#### 创建RAID0和RAID5

- **raid0 四个磁盘，raide5 三个磁盘，一个备份磁盘**

![](磁盘阵列的创建/image-20230418174545835.png)

```
mdadm 命令用法：mdadm [mode] [options]
```

```
-C: 创建模式
-v 显示创建过程中的详细信息
      -n #: 使用#个块设备来创建此RAID
      -l #：指明要创建的RAID的级别
      -a {yes|no}：自动创建目标RAID设备的设备文件
      -c CHUNK_SIZE: 指明块大小,单位k
      -x #: 指明空闲盘的个数

-D：显示raid的详细信息
      mdadm-D /dev/md#

管理模式：
      -f: 标记指定磁盘为损坏
      -a: 添加磁盘
      -r: 移除磁盘
```



#### 查看RAID0和RAID5信息

![](磁盘阵列的创建/image-20230418174557728.png)



![](磁盘阵列的创建/image-20230418174631618.png)

#### 格式化和挂载

- **先对磁盘进行格式化**

![](磁盘阵列的创建/image-20230418174649016.png)



![](磁盘阵列的创建/image-20230418174706807.png)

- **进行挂载**
  ![](磁盘阵列的创建/image-20230418174726036.png)
